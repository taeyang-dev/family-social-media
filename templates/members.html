{% extends "base.html" %}
{% block content %}
<h1>가족 구성원 관리</h1>

<div class="top-actions">
  <a href="{{ url_for('login') }}">← 로그인 화면으로</a>
  <a href="{{ url_for('admin_logout') }}">관리자 로그아웃</a>
</div>

<section class="add">
  <h2>새 구성원 추가</h2>
  <form method="POST" action="{{ url_for('add_member') }}" class="row">
    <input type="text" name="name" placeholder="예: 할머니" required />
    <button type="submit">추가</button>
  </form>
</section>

<section class="list">
  <h2>구성원 목록</h2>
  <ul>
    {% for m in members %}
    <li class="member-item">
      <div class="name">{{ m.name }}</div>
      <form method="POST" action="{{ url_for('rename_member', member_id=m.id) }}" class="inline">
        <input type="text" name="new_name" placeholder="새 이름" />
        <button type="submit">이름 변경</button>
      </form>
      <form method="POST" action="{{ url_for('delete_member', member_id=m.id) }}" class="inline" onsubmit="return confirm('정말 삭제할까요?');">
        <button type="submit" class="danger">삭제</button>
      </form>
    </li>
    {% endfor %}
  </ul>
</section>

<style>
  .top-actions { display:flex; gap:12px; margin-bottom:12px; }
  .add, .list { margin-top: 24px; }
  .row { display:flex; gap:8px; max-width:520px; }
  input { flex:1; padding:12px; font-size:16px; }
  button { padding:12px 16px; font-size:16px; cursor:pointer; }
  .list ul { list-style:none; padding:0; }
  .member-item { display:flex; gap:8px; align-items:center; padding:8px 0; border-bottom:1px solid #eee; }
  .member-item .name { font-weight:600; min-width:140px; }
  .inline { display:flex; gap:8px; }
  .danger { background:#f8d7da; border:1px solid #f5c2c7; }
</style>
{% endblock %}